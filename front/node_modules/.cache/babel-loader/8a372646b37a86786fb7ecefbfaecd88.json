{"ast":null,"code":"import axios from 'axios';\nconst url = 'https://jastegri.pythonanywhere.com';\nexport const signUpUser = user => dispatch => {\n  dispatch(signUpUserStarted());\n  axios.post(`${url}/auth/users/`, user).then(res => {\n    if (res.status >= 400) {\n      console.log(res);\n    }\n  }).then(res => {\n    console.log(res);\n    localStorage.setItem('token', JSON.stringify(res.data.tokens));\n    dispatch(signUpUserSuccess(res.data));\n  }).catch(error => {\n    // Error\n    if (error.response) {\n      dispatch(signUpUserFailure(error.response.data.password));\n      dispatch(signUpUserFailure(error.response.data.email));\n      dispatch(signUpUserFailure(error.response.data.username));\n      console.log(error.response.data);\n      console.log(error.response.status);\n      console.log(error.response.headers);\n    } else if (error.request) {\n      console.log(error.request);\n    } else {\n      console.log('Error', error.message);\n      dispatch(signUpUserFailure(error.message));\n    }\n  });\n};\n\nconst signUpUserStarted = () => ({\n  type: 'SIGNUP_USER'\n});\n\nconst signUpUserSuccess = user => ({\n  type: 'SIGNUP_USER_SUCCESS',\n  payload: user\n});\n\nconst signUpUserFailure = error => ({\n  type: 'SIGNUP_USER_FAILURE',\n  payload: error\n});\n\nexport const meFromToken = tokenFromStorage => dispatch => {\n  dispatch(meFromTokenStarted());\n  axios.get(`${url}/auth/users/me/`, {\n    headers: {\n      Authorization: `Bearer ${tokenFromStorage}`\n    }\n  }).then(res => {\n    // localStorage.setItem('token', res.data.tokens);\n    dispatch(meFromTokenSuccess(res.data));\n  }).catch(err => {\n    localStorage.removeItem('token');\n    dispatch(meFromTokenFailure(err.message));\n  });\n};\n\nconst meFromTokenStarted = () => ({\n  type: 'ME_FROM_TOKEN'\n});\n\nconst meFromTokenSuccess = user => ({\n  type: 'ME_FROM_TOKEN_SUCCESS',\n  payload: user\n});\n\nconst meFromTokenFailure = error => ({\n  type: 'ME_FROM_TOKEN_FAILURE',\n  payload: error\n});\n\nexport const loginUser = user => dispatch => {\n  dispatch(loginUserStarted());\n  axios.post(`${url}/login/`, user).then(({\n    data\n  }) => {\n    const tokens = {\n      refresh: data.refresh,\n      access: data.access\n    };\n    localStorage.setItem('token', JSON.stringify(tokens));\n    dispatch(loginUserSuccess(data));\n  }).catch(err => {\n    dispatch(loginUserFailure(err.message));\n  });\n};\n\nconst loginUserStarted = () => ({\n  type: 'LOGIN_USER'\n});\n\nconst loginUserSuccess = user => ({\n  type: 'LOGIN_USER_SUCCESS',\n  payload: user\n});\n\nconst loginUserFailure = error => ({\n  type: 'LOGIN_USER_FAILURE',\n  payload: error\n});\n\nexport const editUser = user => dispatch => {\n  dispatch(editUserStarted());\n  axios.get(`${url}/edit/`, user).then(({\n    data\n  }) => {\n    // localStorage.setItem('token', JSON.stringify(data.tokens));\n    dispatch(editUserSuccess(data));\n  }).catch(err => {\n    dispatch(editUserFailure(err.message));\n  });\n};\n\nconst editUserStarted = data => ({\n  type: 'EDIT_USER',\n  payload: data\n});\n\nconst editUserSuccess = user => ({\n  type: 'EDIT_USER_SUCCESS',\n  payload: user\n});\n\nconst editUserFailure = error => ({\n  type: 'EDIT_USER_FAILURE',\n  payload: error\n});\n\nexport const logoutUser = () => ({\n  type: 'LOGOUT_USER'\n});","map":{"version":3,"sources":["/home/ariet/project/pizza_shop/src/redux/actions/user.js"],"names":["axios","url","signUpUser","user","dispatch","signUpUserStarted","post","then","res","status","console","log","localStorage","setItem","JSON","stringify","data","tokens","signUpUserSuccess","catch","error","response","signUpUserFailure","password","email","username","headers","request","message","type","payload","meFromToken","tokenFromStorage","meFromTokenStarted","get","Authorization","meFromTokenSuccess","err","removeItem","meFromTokenFailure","loginUser","loginUserStarted","refresh","access","loginUserSuccess","loginUserFailure","editUser","editUserStarted","editUserSuccess","editUserFailure","logoutUser"],"mappings":"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","sourcesContent":["import axios from 'axios';\nconst url = 'https://jastegri.pythonanywhere.com';\n\nexport const signUpUser = (user) => (dispatch) => {\n  dispatch(signUpUserStarted());\n\n  axios\n    .post(`${url}/auth/users/`, user)\n    .then((res) => {\n      if (res.status >= 400) {\n        console.log(res);\n      }\n    })\n    .then((res) => {\n      console.log(res);\n      localStorage.setItem('token', JSON.stringify(res.data.tokens));\n      dispatch(signUpUserSuccess(res.data));\n    })\n    .catch((error) => {\n      // Error\n      if (error.response) {\n        dispatch(signUpUserFailure(error.response.data.password));\n        dispatch(signUpUserFailure(error.response.data.email));\n        dispatch(signUpUserFailure(error.response.data.username));\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else if (error.request) {\n        console.log(error.request);\n      } else {\n        console.log('Error', error.message);\n        dispatch(signUpUserFailure(error.message));\n      }\n    });\n};\n\nconst signUpUserStarted = () => ({\n  type: 'SIGNUP_USER',\n});\n\nconst signUpUserSuccess = (user) => ({\n  type: 'SIGNUP_USER_SUCCESS',\n  payload: user,\n});\n\nconst signUpUserFailure = (error) => ({\n  type: 'SIGNUP_USER_FAILURE',\n  payload: error,\n});\n\nexport const meFromToken = (tokenFromStorage) => (dispatch) => {\n  dispatch(meFromTokenStarted());\n\n  axios\n    .get(`${url}/auth/users/me/`, {\n      headers: { Authorization: `Bearer ${tokenFromStorage}` },\n    })\n    .then((res) => {\n      // localStorage.setItem('token', res.data.tokens);\n      dispatch(meFromTokenSuccess(res.data));\n    })\n    .catch((err) => {\n      localStorage.removeItem('token');\n      dispatch(meFromTokenFailure(err.message));\n    });\n};\n\nconst meFromTokenStarted = () => ({\n  type: 'ME_FROM_TOKEN',\n});\n\nconst meFromTokenSuccess = (user) => ({\n  type: 'ME_FROM_TOKEN_SUCCESS',\n  payload: user,\n});\n\nconst meFromTokenFailure = (error) => ({\n  type: 'ME_FROM_TOKEN_FAILURE',\n  payload: error,\n});\n\nexport const loginUser = (user) => (dispatch) => {\n  dispatch(loginUserStarted());\n\n  axios\n    .post(`${url}/login/`, user)\n    .then(({ data }) => {\n      const tokens = {\n        refresh: data.refresh,\n        access: data.access,\n      };\n\n      localStorage.setItem('token', JSON.stringify(tokens));\n      dispatch(loginUserSuccess(data));\n    })\n    .catch((err) => {\n      dispatch(loginUserFailure(err.message));\n    });\n};\n\nconst loginUserStarted = () => ({\n  type: 'LOGIN_USER',\n});\n\nconst loginUserSuccess = (user) => ({\n  type: 'LOGIN_USER_SUCCESS',\n  payload: user,\n});\n\nconst loginUserFailure = (error) => ({\n  type: 'LOGIN_USER_FAILURE',\n  payload: error,\n});\n\nexport const editUser = (user) => (dispatch) => {\n  dispatch(editUserStarted());\n\n  axios\n    .get(`${url}/edit/`, user)\n    .then(({ data }) => {\n      // localStorage.setItem('token', JSON.stringify(data.tokens));\n      dispatch(editUserSuccess(data));\n    })\n    .catch((err) => {\n      dispatch(editUserFailure(err.message));\n    });\n};\n\nconst editUserStarted = (data) => ({\n  type: 'EDIT_USER',\n  payload: data,\n});\n\nconst editUserSuccess = (user) => ({\n  type: 'EDIT_USER_SUCCESS',\n  payload: user,\n});\n\nconst editUserFailure = (error) => ({\n  type: 'EDIT_USER_FAILURE',\n  payload: error,\n});\n\nexport const logoutUser = () => ({\n  type: 'LOGOUT_USER',\n});\n"]},"metadata":{},"sourceType":"module"}