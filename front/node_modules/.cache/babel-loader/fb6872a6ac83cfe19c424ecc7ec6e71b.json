{"ast":null,"code":"import axios from 'axios'; // import Condition from 'yup/lib/Condition';\n// const meFromToken = (tokenFromStorage) => (dispatch) => {\n//   axios\n// .get(`https://jastegri.pythonanywhere.com/auth/users/me/`, {\n//   headers: { Authorization: `Bearer ${tokenFromStorage}` },\n// })\n//     .then(({ data }) => {\n//       // localStorage.setItem('token', JSON.stringify(data.tokens));\n//       dispatch(reloadToken(data));\n//     })\n//     .catch((err) => console.log(err.message));\n// };\n// const reloadToken = (data) => ({\n//   type: 'ME_FROM_TOKEN',\n//   payload: data,\n// });\n\nexport const meFromToken = tokenFromStorage => dispatch => {\n  dispatch(meFromTokenStarted());\n  axios.get(`https://jastegri.pythonanywhere.com/auth/users/me/`, {\n    headers: {\n      Authorization: `Bearer ${tokenFromStorage}`\n    }\n  }).then(res => {\n    // localStorage.setItem('token', res.data.tokens);\n    dispatch(meFromTokenSuccess(res.data));\n  }).catch(err => {\n    localStorage.removeItem('token');\n    dispatch(meFromTokenFailure(err.message));\n  });\n};\n\nconst meFromTokenStarted = () => ({\n  type: 'ME_FROM_TOKEN'\n});\n\nconst meFromTokenSuccess = user => ({\n  type: 'ME_FROM_TOKEN_SUCCESS',\n  payload: user\n});\n\nconst meFromTokenFailure = error => ({\n  type: 'ME_FROM_TOKEN_FAILURE',\n  payload: error\n});","map":{"version":3,"sources":["/home/ariet/project/pizza_shop/src/redux/actions/reload.js"],"names":["axios","meFromToken","tokenFromStorage","dispatch","meFromTokenStarted","get","headers","Authorization","then","res","meFromTokenSuccess","data","catch","err","localStorage","removeItem","meFromTokenFailure","message","type","user","payload","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,WAAW,GAAIC,gBAAD,IAAuBC,QAAD,IAAc;AAC7DA,EAAAA,QAAQ,CAACC,kBAAkB,EAAnB,CAAR;AAEAJ,EAAAA,KAAK,CACFK,GADH,CACQ,oDADR,EAC6D;AACzDC,IAAAA,OAAO,EAAE;AAAEC,MAAAA,aAAa,EAAG,UAASL,gBAAiB;AAA5C;AADgD,GAD7D,EAIGM,IAJH,CAISC,GAAD,IAAS;AACb;AACAN,IAAAA,QAAQ,CAACO,kBAAkB,CAACD,GAAG,CAACE,IAAL,CAAnB,CAAR;AACD,GAPH,EAQGC,KARH,CAQUC,GAAD,IAAS;AACdC,IAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAZ,IAAAA,QAAQ,CAACa,kBAAkB,CAACH,GAAG,CAACI,OAAL,CAAnB,CAAR;AACD,GAXH;AAYD,CAfM;;AAiBP,MAAMb,kBAAkB,GAAG,OAAO;AAChCc,EAAAA,IAAI,EAAE;AAD0B,CAAP,CAA3B;;AAIA,MAAMR,kBAAkB,GAAIS,IAAD,KAAW;AACpCD,EAAAA,IAAI,EAAE,uBAD8B;AAEpCE,EAAAA,OAAO,EAAED;AAF2B,CAAX,CAA3B;;AAKA,MAAMH,kBAAkB,GAAIK,KAAD,KAAY;AACrCH,EAAAA,IAAI,EAAE,uBAD+B;AAErCE,EAAAA,OAAO,EAAEC;AAF4B,CAAZ,CAA3B","sourcesContent":["import axios from 'axios';\n// import Condition from 'yup/lib/Condition';\n\n// const meFromToken = (tokenFromStorage) => (dispatch) => {\n//   axios\n// .get(`https://jastegri.pythonanywhere.com/auth/users/me/`, {\n//   headers: { Authorization: `Bearer ${tokenFromStorage}` },\n// })\n//     .then(({ data }) => {\n//       // localStorage.setItem('token', JSON.stringify(data.tokens));\n\n//       dispatch(reloadToken(data));\n//     })\n//     .catch((err) => console.log(err.message));\n// };\n\n// const reloadToken = (data) => ({\n//   type: 'ME_FROM_TOKEN',\n//   payload: data,\n// });\n\nexport const meFromToken = (tokenFromStorage) => (dispatch) => {\n  dispatch(meFromTokenStarted());\n\n  axios\n    .get(`https://jastegri.pythonanywhere.com/auth/users/me/`, {\n      headers: { Authorization: `Bearer ${tokenFromStorage}` },\n    })\n    .then((res) => {\n      // localStorage.setItem('token', res.data.tokens);\n      dispatch(meFromTokenSuccess(res.data));\n    })\n    .catch((err) => {\n      localStorage.removeItem('token');\n      dispatch(meFromTokenFailure(err.message));\n    });\n};\n\nconst meFromTokenStarted = () => ({\n  type: 'ME_FROM_TOKEN',\n});\n\nconst meFromTokenSuccess = (user) => ({\n  type: 'ME_FROM_TOKEN_SUCCESS',\n  payload: user,\n});\n\nconst meFromTokenFailure = (error) => ({\n  type: 'ME_FROM_TOKEN_FAILURE',\n  payload: error,\n});\n"]},"metadata":{},"sourceType":"module"}